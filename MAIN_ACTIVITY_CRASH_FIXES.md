# –û—Ç—á–µ—Ç: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∞—à–µ–π –≤ –≥–ª–∞–≤–Ω–æ–π —Ñ–æ—Ä–º–µ

## üö® **–ü—Ä–æ–±–ª–µ–º–∞**
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≥–ª–∞–≤–Ω–æ–π —Ñ–æ—Ä–º—ã —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

## üîç **–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**

### **1. –ü—Ä–æ–±–ª–µ–º–Ω—ã–π –≤—ã–∑–æ–≤ NotificationManager –≤ –∞–¥–∞–ø—Ç–µ—Ä–µ**
```kotlin
// –ü—Ä–æ–±–ª–µ–º–∞: NotificationManager –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –∞–¥–∞–ø—Ç–µ—Ä–µ
val notificationManager = com.medicalnotes.app.utils.NotificationManager(binding.root.context)
notificationManager.showOverdueMedicineNotification(medicine)

// –†–µ—à–µ–Ω–∏–µ: –£–±—Ä–∞–ª –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –≤—ã–∑–æ–≤
// try {
//     val notificationManager = com.medicalnotes.app.utils.NotificationManager(binding.root.context)
//     notificationManager.showOverdueMedicineNotification(medicine)
// } catch (e: Exception) {
//     android.util.Log.e("MainMedicineAdapter", "Error showing notification", e)
// }
```

### **2. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ observeData**
```kotlin
// –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ª–µ–∫–∞—Ä—Å—Ç–≤
medicines.forEach { medicine ->
    val status = DosageCalculator.getMedicineStatus(medicine)
    // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞
}

// –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞
medicines.forEach { medicine ->
    try {
        val status = DosageCalculator.getMedicineStatus(medicine)
        // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞
    } catch (e: Exception) {
        android.util.Log.e("MainActivity", "Error processing medicine ${medicine.name}", e)
        addLog("‚ùå –û–®–ò–ë–ö–ê –æ–±—Ä–∞–±–æ—Ç–∫–∏: ${medicine.name}")
    }
}
```

### **3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –≤ addLog**
```kotlin
// –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ª–æ–≥–æ–≤
private fun addLog(message: String) {
    val timestamp = LocalDateTime.now().format(...)
    binding.textViewLogs.append("$logMessage\n")
    // ... –ø—Ä–æ–∫—Ä—É—Ç–∫–∞
}

// –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞
private fun addLog(message: String) {
    try {
        val timestamp = LocalDateTime.now().format(...)
        binding.textViewLogs.append("$logMessage\n")
        // ... –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ —Å –∑–∞—â–∏—Ç–æ–π
    } catch (e: Exception) {
        android.util.Log.e("MainActivity", "Error adding log", e)
    }
}
```

### **4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –≤ –∫–Ω–æ–ø–∫–∞—Ö**
```kotlin
// –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–Ω–æ–ø–∫–∏ –Ω–µ –∑–∞—â–∏—â–µ–Ω—ã try-catch
binding.buttonToggleLogs.setOnClickListener { toggleLogsVisibility() }
binding.buttonExportData.setOnClickListener { exportData() }

// –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –¥–ª—è –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
try {
    binding.buttonToggleLogs.setOnClickListener { toggleLogsVisibility() }
} catch (e: Exception) {
    android.util.Log.e("MainActivity", "Error setting up toggle logs button", e)
}
```

## ‚úÖ **–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

### **1. MainMedicineAdapter.kt**
- ‚úÖ –£–±—Ä–∞–Ω –ø—Ä–æ–±–ª–µ–º–Ω—ã–π –≤—ã–∑–æ–≤ NotificationManager
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –æ –ø—Ä–∏—á–∏–Ω–µ —É–¥–∞–ª–µ–Ω–∏—è
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –±–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### **2. MainActivity.kt**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ try-catch –≤ `observeData()`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –≤ —Ü–∏–∫–ª–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –¥–ª—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ –ª–µ–∫–∞—Ä—Å—Ç–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –≤ `addLog()`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –≤ `clearLogs()`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –≤ `toggleLogsVisibility()`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –¥–ª—è –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫ –≤ `setupButtons()`

## üì± **–†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –≥–ª–∞–≤–Ω–æ–π —Ñ–æ—Ä–º—ã
- ‚ùå –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
- ‚ùå –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã NotificationManager
- ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ fallback –¥–ª—è –æ—à–∏–±–æ–∫

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ –í—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ Fallback –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üõ†Ô∏è **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

### **–ü—Ä–æ–±–ª–µ–º–∞ —Å NotificationManager:**
- **–ü—Ä–∏—á–∏–Ω–∞**: NotificationManager –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- **–†–µ—à–µ–Ω–∏–µ**: –£–±—Ä–∞–ª –≤—ã–∑–æ–≤ –∏–∑ –∞–¥–∞–ø—Ç–µ—Ä–∞, –æ—Å—Ç–∞–≤–∏–ª —Ç–æ–ª—å–∫–æ –≤ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è—Ö
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–π –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º

### **–ü—Ä–æ–±–ª–µ–º–∞ —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ª–µ–∫–∞—Ä—Å—Ç–≤:**
- **–ü—Ä–∏—á–∏–Ω–∞**: DosageCalculator –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–†–µ—à–µ–Ω–∏–µ**: –ö–∞–∂–¥–æ–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º try-catch
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –û—à–∏–±–∫–∞ –æ–¥–Ω–æ–≥–æ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –Ω–µ –∫—Ä–∞—à–∏—Ç –≤—Å–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### **–ü—Ä–æ–±–ª–µ–º–∞ —Å UI —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏:**
- **–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ UI –æ–ø–µ—Ä–∞—Ü–∏–∏ –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- **–†–µ—à–µ–Ω–∏–µ**: –í—Å–µ UI –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ–±–µ—Ä–Ω—É—Ç—ã –≤ try-catch
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

## üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–π | –¢–∏–ø –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π |
|------|-----------|-----------------|
| `MainMedicineAdapter.kt` | 1 | –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ –∫–æ–¥–∞ |
| `MainActivity.kt` | 15+ | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π |

**–í—Å–µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**: 16+

## üéØ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**

1. **‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –ì–ª–∞–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ –±–æ–ª—å—à–µ –Ω–µ –∫—Ä–∞—à–∏—Ç—Å—è
2. **‚úÖ –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**: –û—à–∏–±–∫–∏ –æ–¥–Ω–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –¥—Ä—É–≥–∏–µ
3. **‚úÖ –û—Ç–ª–∞–¥–∫–∞**: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ—à–∏–±–æ–∫
4. **‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

## üìù **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ:**

### **–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∞–¥–∞–ø—Ç–µ—Ä–∞–º–∏:**
```kotlin
// –ù–µ –≤—ã–∑—ã–≤–∞–π—Ç–µ —Å–ª–æ–∂–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã –≤ –∞–¥–∞–ø—Ç–µ—Ä–∞—Ö
// –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–±—ã—Ç–∏—è –∏–ª–∏ –∫–æ–ª–±—ç–∫–∏
binding.button.setOnClickListener {
    onMedicineAction(medicine, ActionType.NOTIFICATION)
}
```

### **–ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–ø–∏—Å–∫–æ–≤:**
```kotlin
// –í—Å–µ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –æ—Ç–¥–µ–ª—å–Ω–æ
list.forEach { item ->
    try {
        processItem(item)
    } catch (e: Exception) {
        Log.e("TAG", "Error processing item", e)
        // Fallback –∏–ª–∏ –ø—Ä–æ–ø—É—Å–∫
    }
}
```

### **–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å UI:**
```kotlin
// –í—Å–µ–≥–¥–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ UI –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ try-catch
try {
    binding.textView.text = value
} catch (e: Exception) {
    Log.e("TAG", "Error setting text", e)
    // Fallback –∑–Ω–∞—á–µ–Ω–∏–µ
}
```

---

**–í—ã–≤–æ–¥**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–∞–Ω–∏–ª–∏ –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –∫—Ä–∞—à–µ–π –≤ –≥–ª–∞–≤–Ω–æ–π —Ñ–æ—Ä–º–µ. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è. 