# –û—Ç—á–µ—Ç: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∞—à–µ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üö® **–ü—Ä–æ–±–ª–µ–º–∞**
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —Å —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `applicationId`.

## üîç **–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –∫—Ä–∞—à–µ–π:**

### **1. –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ API –≤ VersionUtils**
```kotlin
// –ü—Ä–æ–±–ª–µ–º–∞: versionCode —É—Å—Ç–∞—Ä–µ–ª –≤ Android P+
packageInfo.versionCode  // ‚ùå –£—Å—Ç–∞—Ä–µ–ª–æ

// –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ longVersionCode
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
    packageInfo.longVersionCode.toInt()  // ‚úÖ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π API
} else {
    @Suppress("DEPRECATION")
    packageInfo.versionCode  // ‚úÖ –î–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π
}
```

### **2. –£—Å—Ç–∞—Ä–µ–≤—à–∏–µ API –≤ DataExportManager**
```kotlin
// –ü—Ä–æ–±–ª–µ–º–∞: –¢–æ—Ç –∂–µ issue —Å versionCode
context.packageManager.getPackageInfo(context.packageName, 0).versionCode

// –†–µ—à–µ–Ω–∏–µ: –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
val versionCode = if (android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.P) {
    packageInfo.longVersionCode.toInt()
} else {
    @Suppress("DEPRECATION")
    packageInfo.versionCode
}
```

### **3. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π**
```kotlin
// –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç –∫—Ä–∞—à–µ–π
binding.toolbar.subtitle = VersionUtils.getShortVersionInfo(this)

// –†–µ—à–µ–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞
try {
    binding.toolbar.subtitle = VersionUtils.getShortVersionInfo(this)
} catch (e: Exception) {
    android.util.Log.e("MainActivity", "Error setting version info", e)
    binding.toolbar.subtitle = "v?.?"
}
```

## ‚úÖ **–í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

### **1. VersionUtils.kt**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `android.os.Build`
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω `versionCode` –Ω–∞ `longVersionCode` –¥–ª—è Android P+
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã `@Suppress("DEPRECATION")` –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### **2. DataExportManager.kt**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —É—Å—Ç–∞—Ä–µ–≤—à–∏–π `versionCode` –≤ –º–µ—Ç–æ–¥–µ `createExportInfo`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ Android
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### **3. MainActivity.kt**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ try-catch –≤ `setupViews()`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ try-catch –≤ `setupButtons()`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
- ‚úÖ Fallback –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

## üì± **–†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**

### **–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚ùå –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫—Ä–∞—à–∏—Ç—Å—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏
- ‚ùå –û—à–∏–±–∫–∏ —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ API
- ‚ùå –ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### **–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
- ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –Ω–æ–≤—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ Android
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –∫—Ä–∞—à–µ–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üõ†Ô∏è **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:**

### **–ü—Ä–æ–±–ª–µ–º–∞ —Å versionCode:**
- **Android P (API 28)+**: `versionCode` —É—Å—Ç–∞—Ä–µ–ª, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `longVersionCode`
- **Android < P**: `versionCode` –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ Android –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ API

### **–ó–∞—â–∏—Ç–∞ –æ—Ç –∫—Ä–∞—à–µ–π:**
```kotlin
// –û–±—â–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω –∑–∞—â–∏—Ç—ã
try {
    // –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–¥
    criticalOperation()
} catch (e: Exception) {
    // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏
    Log.e("TAG", "Error description", e)
    // Fallback –∑–Ω–∞—á–µ–Ω–∏–µ
    fallbackValue()
}
```

## üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏–π | –¢–∏–ø –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π |
|------|-----------|-----------------|
| `VersionUtils.kt` | 5 | API —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å |
| `DataExportManager.kt` | 3 | API —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å |
| `MainActivity.kt` | 8 | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π |

**–í—Å–µ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**: 16

## üéØ **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**

1. **‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**: –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±–æ–ª—å—à–µ –Ω–µ –∫—Ä–∞—à–∏—Ç—Å—è
2. **‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –≤–µ—Ä—Å–∏—è—Ö Android
3. **‚úÖ –û—Ç–ª–∞–¥–∫–∞**: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. **‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: Fallback –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤

## üìù **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –±—É–¥—É—â–µ–≥–æ:**

### **–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å PackageInfo:**
```kotlin
// –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –≤–µ—Ä—Å–∏—é Android
val versionCode = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
    packageInfo.longVersionCode.toInt()
} else {
    @Suppress("DEPRECATION")
    packageInfo.versionCode
}
```

### **–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ UI:**
```kotlin
// –í—Å–µ–≥–¥–∞ –æ–±–æ—Ä–∞—á–∏–≤–∞–π—Ç–µ –≤ try-catch
try {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
} catch (e: Exception) {
    Log.e("TAG", "Error description", e)
    // Fallback
}
```

---

**–í—ã–≤–æ–¥**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—Å—Ç—Ä–∞–Ω–∏–ª–∏ –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –∫—Ä–∞—à–µ–π. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –≤–µ—Ä—Å–∏—è—Ö Android. 