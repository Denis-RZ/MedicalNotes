# –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –£–ú–ï–ù–¨–®–ï–ù–ò–Ø –ö–û–õ–ò–ß–ï–°–¢–í–ê –¢–ê–ë–õ–ï–¢–û–ö

## üîß –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ü—Ä–∏–Ω—è–ª" –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–±–ª–µ—Ç–æ–∫ –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ **–ù–ï –£–ú–ï–ù–¨–®–ê–õ–û–°–¨** –Ω–∞ 1.

## üîç –ü—Ä–∏—á–∏–Ω–∞

–í —Ñ—É–Ω–∫—Ü–∏–∏ `takeMedicine` –≤ `MainActivity.kt` –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ **–ù–ï –ò–ó–ú–ï–ù–Ø–õ–û–°–¨** –ø–æ–ª–µ `remainingQuantity`.

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω–æ —É–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–∞–±–ª–µ—Ç–æ–∫

```kotlin
// ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –£–º–µ–Ω—å—à–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–±–ª–µ—Ç–æ–∫ –Ω–∞ 1
val newRemainingQuantity = (medicine.remainingQuantity - 1).coerceAtLeast(0)

android.util.Log.d("MainActivity", "=== –£–ú–ï–ù–¨–®–ï–ù–ò–ï –ö–û–õ–ò–ß–ï–°–¢–í–ê ===")
android.util.Log.d("MainActivity", "–õ–µ–∫–∞—Ä—Å—Ç–≤–æ: ${medicine.name}")
android.util.Log.d("MainActivity", "–°—Ç–∞—Ä–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${medicine.remainingQuantity}")
android.util.Log.d("MainActivity", "–ù–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: $newRemainingQuantity")

val updatedMedicine = medicine.copy(
    takenToday = true,
    isMissed = false,
    lastTakenTime = System.currentTimeMillis(),
    takenAt = System.currentTimeMillis(),
    remainingQuantity = newRemainingQuantity // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –£–º–µ–Ω—å—à–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
)
```

### 2. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏—Ö—Å—è —Ç–∞–±–ª–µ—Ç–∫–∞—Ö

```kotlin
// ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏—Ö—Å—è —Ç–∞–±–ª–µ—Ç–∫–∞—Ö
if (newRemainingQuantity <= 5 && newRemainingQuantity > 0) {
    android.util.Log.d("MainActivity", "‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ó–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è —Ç–∞–±–ª–µ—Ç–∫–∏ ${medicine.name}")
    addLog("‚ö†Ô∏è –í–ù–ò–ú–ê–ù–ò–ï: –ó–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è —Ç–∞–±–ª–µ—Ç–∫–∏ ${medicine.name} (–æ—Å—Ç–∞–ª–æ—Å—å: $newRemainingQuantity)")
    
    CoroutineScope(Dispatchers.Main).launch {
        android.widget.Toast.makeText(
            this@MainActivity,
            "‚ö†Ô∏è –ó–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è ${medicine.medicineType.lowercase()} ${medicine.name} (–æ—Å—Ç–∞–ª–æ—Å—å: $newRemainingQuantity)",
            android.widget.Toast.LENGTH_LONG
        ).show()
    }
} else if (newRemainingQuantity == 0) {
    android.util.Log.d("MainActivity", "üö® –ö–†–ò–¢–ò–ß–ù–û: –¢–∞–±–ª–µ—Ç–∫–∏ ${medicine.name} –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å!")
    addLog("üö® –ö–†–ò–¢–ò–ß–ù–û: –¢–∞–±–ª–µ—Ç–∫–∏ ${medicine.name} –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å!")
    
    CoroutineScope(Dispatchers.Main).launch {
        android.widget.Toast.makeText(
            this@MainActivity,
            "üö® ${medicine.medicineType.lowercase().replaceFirstChar { it.uppercase() }} ${medicine.name} –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å! –ù—É–∂–Ω–æ –ø–æ–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø–∞—Å!",
            android.widget.Toast.LENGTH_LONG
        ).show()
    }
}
```

## üìù –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### MainActivity.kt

1. **–î–æ–±–∞–≤–ª–µ–Ω–æ —É–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞:**
   ```kotlin
   val newRemainingQuantity = (medicine.remainingQuantity - 1).coerceAtLeast(0)
   ```

2. **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ remainingQuantity –≤ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:**
   ```kotlin
   remainingQuantity = newRemainingQuantity
   ```

3. **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   ```kotlin
   android.util.Log.d("MainActivity", "=== –£–ú–ï–ù–¨–®–ï–ù–ò–ï –ö–û–õ–ò–ß–ï–°–¢–í–ê ===")
   android.util.Log.d("MainActivity", "–õ–µ–∫–∞—Ä—Å—Ç–≤–æ: ${medicine.name}")
   android.util.Log.d("MainActivity", "–°—Ç–∞—Ä–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${medicine.remainingQuantity}")
   android.util.Log.d("MainActivity", "–ù–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ: $newRemainingQuantity")
   ```

4. **–î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:**
   - **‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:** –ö–æ–≥–¥–∞ –æ—Å—Ç–∞–µ—Ç—Å—è 5 –∏–ª–∏ –º–µ–Ω—å—à–µ —Ç–∞–±–ª–µ—Ç–æ–∫
   - **üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:** –ö–æ–≥–¥–∞ —Ç–∞–±–ª–µ—Ç–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å (0)

5. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω deprecated –º–µ—Ç–æ–¥:**
   ```kotlin
   // –ë—ã–ª–æ: .capitalize()
   // –°—Ç–∞–ª–æ: .replaceFirstChar { it.uppercase() }
   ```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### ‚úÖ –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞
- **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ:** –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ü—Ä–∏–Ω—è–ª" –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–±–ª–µ—Ç–æ–∫ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –Ω–∞ 1
- **–ó–∞—â–∏—Ç–∞ –æ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `coerceAtLeast(0)` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏

### ‚úÖ –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –∑–∞–ø–∞—Å–∞—Ö
- **‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–µ—Ç—Å—è 5 –∏–ª–∏ –º–µ–Ω—å—à–µ —Ç–∞–±–ª–µ—Ç–æ–∫
- **üö® –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –∫–æ–≥–¥–∞ —Ç–∞–±–ª–µ—Ç–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å
- **–ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:** –£–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞–∑–≤–∞–Ω–∏–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –∏ –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ

### ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–ü–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:** –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ª–æ–≥–∏—Ä—É—é—Ç—Å—è
- **–û—Ç–ª–∞–¥–∫–∞:** –õ–µ–≥–∫–æ –æ—Ç—Å–ª–µ–¥–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —á–µ—Ä–µ–∑ –ª–æ–≥–∏

## üì± APK –≥–æ—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- **–ü—É—Ç—å:** `app/build/outputs/apk/debug/app-debug.apk`
- **–°—Ç–∞—Ç—É—Å:** –°–±–æ—Ä–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
- **–ò–∑–º–µ–Ω–µ–Ω–∏—è:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —É–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–∞–±–ª–µ—Ç–æ–∫

## üîç –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–º–µ–Ω—å—à–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞:
1. –î–æ–±–∞–≤—å—Ç–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –±–æ–ª—å—à–µ 1
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü—Ä–∏–Ω—è–ª"
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–º–µ–Ω—å—à–∏–ª–æ—Å—å –Ω–∞ 1
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∫–∞—Ä—Ç–æ—á–∫–∞ –∏—Å—á–µ–∑–ª–∞ –∏–∑ —Å–ø–∏—Å–∫–∞

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π:
1. –î–æ–±–∞–≤—å—Ç–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º 6 —Ç–∞–±–ª–µ—Ç–æ–∫
2. –ù–∞–∂–∏–º–∞–π—Ç–µ "–ü—Ä–∏–Ω—è–ª" –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –æ—Å—Ç–∞–Ω–µ—Ç—Å—è 5
3. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ "‚ö†Ô∏è –ó–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è..."
4. –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –Ω–∞–∂–∏–º–∞—Ç—å –¥–æ 0
5. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ "üö® ... –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å!"

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π:
1. –î–æ–±–∞–≤—å—Ç–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º 1
2. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–∏–Ω—è–ª"
3. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–ª–∂–Ω–æ —Å—Ç–∞—Ç—å 0, –∞ –Ω–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º

## üéâ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ APK:
- ‚úÖ –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ü—Ä–∏–Ω—è–ª" –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–∞–±–ª–µ—Ç–æ–∫ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –Ω–∞ 1
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏—Ö—Å—è —Ç–∞–±–ª–µ—Ç–∫–∞—Ö
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–º
- ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∞ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ –∏—Å—á–µ–∑–∞–µ—Ç –ø–æ—Å–ª–µ –ø—Ä–∏–µ–º–∞

**–ü—Ä–æ–±–ª–µ–º–∞ —Å —É–º–µ–Ω—å—à–µ–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–∞–±–ª–µ—Ç–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!** 