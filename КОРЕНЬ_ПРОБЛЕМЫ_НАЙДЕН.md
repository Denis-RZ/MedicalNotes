# –ö–û–†–ï–ù–¨ –ü–†–û–ë–õ–ï–ú–´ –ù–ê–ô–î–ï–ù –ò –ò–°–ü–†–ê–í–õ–ï–ù!

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

–ü–æ—Å–ª–µ –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞ –±—ã–ª–∞ –Ω–∞–π–¥–µ–Ω–∞ **–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –û–®–ò–ë–ö–ê** –≤ `NotificationManager.kt`:

### –ü—Ä–æ–±–ª–µ–º–∞: –†–ï–ö–£–†–°–ò–í–ù–´–ô –í–´–ó–û–í
**–°—Ç—Ä–æ–∫–∞ 589:** `showOverdueMedicineNotification(medicine)`

```kotlin
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - –†–ï–ö–£–†–°–ò–í–ù–´–ô –í–´–ó–û–í!
scheduler.schedule({
    // ... –ø—Ä–æ–≤–µ—Ä–∫–∏ ...
    if (activeNotifications.containsKey(medicine.id)) {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–Ω–æ–≤–∞
        showOverdueMedicineNotification(medicine) // ‚Üê –≠–¢–û –°–û–ó–î–ê–í–ê–õ–û –ë–ï–°–ö–û–ù–ï–ß–ù–£–Æ –¶–ï–ü–û–ß–ö–£!
    }
}, 5, TimeUnit.SECONDS)
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:
1. **–ü–µ—Ä–≤—ã–π –≤—ã–∑–æ–≤:** `showOverdueMedicineNotification(medicine)` 
   - –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –∑–≤—É–∫
   - –°–æ–∑–¥–∞–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–∞ 5 —Å–µ–∫—É–Ω–¥
   
2. **–ß–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥:** –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –≤—ã–∑—ã–≤–∞–µ—Ç `showOverdueMedicineNotification(medicine)` —Å–Ω–æ–≤–∞
   - –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç **–ù–û–í–´–ô** –∑–≤—É–∫
   - –°–æ–∑–¥–∞–µ—Ç **–ù–û–í–´–ô** –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–∞ 5 —Å–µ–∫—É–Ω–¥
   
3. **–ß–µ—Ä–µ–∑ –µ—â–µ 5 —Å–µ–∫—É–Ω–¥:** –û–±–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –≤—ã–∑—ã–≤–∞—é—Ç `showOverdueMedicineNotification(medicine)`
   - –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç **–ï–©–ï 2** –∑–≤—É–∫–∞
   - –°–æ–∑–¥–∞–µ—Ç **–ï–©–ï 2** –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
   
4. **–ò —Ç–∞–∫ –¥–∞–ª–µ–µ...** –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç –∑–≤—É–∫–æ–≤!

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï

### –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞:
```kotlin
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –¢–û–õ–¨–ö–û –ø–æ–≤—Ç–æ—Ä –∑–≤—É–∫–∞
scheduler.scheduleAtFixedRate({
    // ... –ø—Ä–æ–≤–µ—Ä–∫–∏ ...
    if (activeNotifications.containsKey(medicine.id)) {
        // ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–ï –≤—ã–∑—ã–≤–∞–µ–º showOverdueMedicineNotification —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ!
        // –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ —Ç–æ–ª—å–∫–æ –ø–æ–≤—Ç–æ—Ä—è–µ–º –∑–≤—É–∫ –∏ –≤–∏–±—Ä–∞—Ü–∏—é
        android.util.Log.d("üîî –ü–õ–ê–ù–ò–†–û–í–©–ò–ö_–ü–û–í–¢–û–†", "–ü–æ–≤—Ç–æ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –∑–≤—É–∫ –∏ –≤–∏–±—Ä–∞—Ü–∏—é –¥–ª—è ${medicine.name}")
        
        // –ü–æ–≤—Ç–æ—Ä—è–µ–º —Ç–æ–ª—å–∫–æ –∑–≤—É–∫
        try {
            val ringtone = RingtoneManager.getRingtone(context, RingtoneManager.getDefaultUri(RingtoneManager.TYPE_ALARM))
            if (ringtone != null) {
                // –°–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤—ã–π Ringtone
                activeRingtones[medicine.id] = ringtone
                ringtone.play()
                android.util.Log.d("üîî –ü–õ–ê–ù–ò–†–û–í–©–ò–ö_–ó–í–£–ö", "–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–≤—É–∫ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω –¥–ª—è ${medicine.name}")
            }
        } catch (e: Exception) {
            android.util.Log.e("üîî –ü–õ–ê–ù–ò–†–û–í–©–ò–ö_–ó–í–£–ö", "–û—à–∏–±–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–≤—É–∫–∞ –¥–ª—è ${medicine.name}", e)
        }
    }
}, 0, 5, TimeUnit.SECONDS)
```

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤:**
```kotlin
// ‚úÖ –î–û–ë–ê–í–õ–ï–ù–û: –•—Ä–∞–Ω–∏–ª–∏—â–µ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤ –¥–ª—è –æ—Ç–º–µ–Ω—ã
private val activeSchedulers = mutableMapOf<Long, java.util.concurrent.ScheduledFuture<*>>()

// –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–º–µ–Ω—ã
activeSchedulers[medicine.id] = scheduledTask
```

2. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—Ç–º–µ–Ω–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞:**
```kotlin
// ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û—Ç–º–µ–Ω—è–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –¥–ª—è —ç—Ç–æ–≥–æ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞
val scheduledTask = activeSchedulers[medicineId]
if (scheduledTask != null) {
    scheduledTask.cancel(false)
    activeSchedulers.remove(medicineId)
    android.util.Log.d("üîá –û–¢–ú–ï–ù–ê_–ü–õ–ê–ù–ò–†–û–í–©–ò–ö", "–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—Ç–º–µ–Ω–µ–Ω –¥–ª—è –ª–µ–∫–∞—Ä—Å—Ç–≤–∞ ID: $medicineId")
}
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚ùå **–ë–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞** –Ω–æ–≤—ã—Ö –∑–≤—É–∫–æ–≤
- ‚ùå **–≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ä–æ—Å—Ç** –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤
- ‚ùå **–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å** –∑–≤—É–∫
- ‚ùå **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- ‚úÖ **–û–¥–∏–Ω –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫** –Ω–∞ –ª–µ–∫–∞—Ä—Å—Ç–≤–æ
- ‚úÖ **–ü–æ–≤—Ç–æ—Ä —Ç–æ–ª—å–∫–æ –∑–≤—É–∫–∞** (–±–µ–∑ –Ω–æ–≤—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- ‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—Ç–º–µ–Ω–∞** –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏
- ‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**

## üì± APK –≥–æ—Ç–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- **–ü—É—Ç—å:** `app/build/outputs/apk/debug/app-debug.apk`
- **–°—Ç–∞—Ç—É—Å:** –°–±–æ—Ä–∫–∞ –ø—Ä–æ—à–ª–∞ —É—Å–ø–µ—à–Ω–æ
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –≤—ã–∑–æ–≤ —É—Å—Ç—Ä–∞–Ω–µ–Ω

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:
1. **–£–±—Ä–∞–Ω–∞ —Ä–µ–∫—É—Ä—Å–∏—è:** `showOverdueMedicineNotification(medicine)` ‚Üí –ø–æ–≤—Ç–æ—Ä —Ç–æ–ª—å–∫–æ –∑–≤—É–∫–∞
2. **–î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ:** `activeSchedulers` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞–º–∏
3. **–£–ª—É—á—à–µ–Ω–∞ –æ—Ç–º–µ–Ω–∞:** –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è –æ—Ç–º–µ–Ω–∞ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞
4. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å:** `scheduleAtFixedRate` –≤–º–µ—Å—Ç–æ `schedule`

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `addLog()` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ—Ç–º–µ–Ω—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–≤

## üéâ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ "–ü—Ä–∏–Ω—è–ª":
1. **–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —Ç–µ–∫—É—â–∏–π –∑–≤—É–∫** (Ringtone)
2. **–û—Ç–º–µ–Ω—è–µ—Ç—Å—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫** (ScheduledFuture)
3. **–£–¥–∞–ª—è–µ—Ç—Å—è –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π**
4. **–ó–≤—É–∫ –±–æ–ª—å—à–µ –ù–ï –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è**

–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ –Ω–∞ –∫–æ—Ä–Ω–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ! 